<div class="dashboard-container">
  <!-- Contenido principal -->
  <main class="dashboard-main">
    <div class="dashboard-content">
      <!-- Header unificado -->
      <section class="unified-header" *ngIf="usuario()">
        <div class="header-content no-avatar">
          <div class="welcome-details">
            <h1>¬°Hola, {{ obtenerPrimerNombre() }}! üëã</h1>
            <p>Bienvenido de vuelta a tu centro de control del p√°del</p>
          </div>
        </div>
      </section>

      <!-- Pr√≥ximos partidos -->
  <section class="upcoming-matches limited-scroll">
        <h2>Tus pr√≥ximos partidos</h2>

  <div *ngIf="upcomingMatches().length > 0; else noUpcoming" class="matches-list" #matchesList [style.max-height.px]="matchesListMaxHeight() || null" role="list" aria-label="Lista de pr√≥ximos partidos (scroll)" (scroll)="onMatchesScroll()">
          <!-- Indicador superior (contenido hacia arriba) -->
          <div class="scroll-hint-top" *ngIf="topIndicatorVisible()" aria-hidden="true" [style.opacity]="topIndicatorOpacity()">
            <div class="fade-top"></div>
            <div class="hint-arrow-up">‚ñ≤</div>
          </div>
          <div class="match-card modern" #matchCard *ngFor="let m of upcomingMatches(); trackBy: trackByUpcomingId">
            <!-- Header con degradado azul -->
            <div class="match-header-gradient">
              <div class="match-date">{{ formatDateLong(m.fecha) }}</div>
              <div class="match-time">{{ formatTimeRange(m.fecha, m.duracion) }}</div>
              <div class="match-location">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21 10c0 7-9 13-9 13S3 17 3 10a9 9 0 1 1 18 0z"></path>
                  <circle cx="12" cy="10" r="3"></circle>
                </svg>
                {{ m.ubicacion || 'Por confirmar' }}
              </div>
            </div>

            <!-- √Årea de jugadores como en la captura -->
            <div class="match-players-area">
              <!-- Equipo 1 - jugadores en vertical -->
              <div class="team-vertical">
                <div class="player-stacked">
                  <div class="player-avatar-compact">{{ getPlayerInitials(m.jugadores.equipo1.jugador1) }}</div>
                  <div class="player-name-compact">{{ m.jugadores.equipo1.jugador1 }}</div>
                </div>
                <div class="player-stacked">
                  <div class="player-avatar-compact">{{ getPlayerInitials(m.jugadores.equipo1.jugador2) }}</div>
                  <div class="player-name-compact">{{ m.jugadores.equipo1.jugador2 }}</div>
                </div>
              </div>

              <!-- L√≠nea separadora vertical como en la captura -->
              <div class="center-divider">
                <div class="divider-line"></div>
              </div>

              <!-- Equipo 2 - jugadores en vertical -->
              <div class="team-vertical">
                <div class="player-stacked">
                  <div class="player-avatar-compact">{{ getPlayerInitials(m.jugadores.equipo2.jugador1) }}</div>
                  <div class="player-name-compact">{{ m.jugadores.equipo2.jugador1 }}</div>
                </div>
                <div class="player-stacked">
                  <div class="player-avatar-compact">{{ getPlayerInitials(m.jugadores.equipo2.jugador2) }}</div>
                  <div class="player-name-compact">{{ m.jugadores.equipo2.jugador2 }}</div>
                </div>
              </div>
            </div>

            <!-- Footer con informaci√≥n del partido y acciones -->
            <div class="match-footer">
              <div class="match-info-chips">
                <!-- Eliminado chip de duraci√≥n -->
                <span class="info-chip type" [class.torneo]="m.tipo === 'torneo'" [class.partido]="m.tipo === 'partido'">
                  {{ m.tipo === 'torneo' ? 'Torneo' : 'Partido' }}
                </span>
                <span class="info-chip match-type" [class.igualado]="m.tipoPartido === 'igualado'" [class.no-igualado]="m.tipoPartido === 'no-igualado'">
                  {{ m.tipoPartido === 'igualado' ? 'Igualado' : 'No igualado' }}
                </span>
                <span class="info-chip estado" [ngClass]="{
                  'pendiente': m.estado === 'pendiente',
                  'confirmado': m.estado === 'confirmado'
                }">{{ m.estado | titlecase }}</span>
                <span class="info-chip rank" *ngIf="m.tipoPartido === 'igualado' && m.rango" [class]="'rank ' + m.rango.toLowerCase()">
                  <span class="rank-emoji">
                    {{ m.rango === 'PLATINO' ? 'üíé' : 
                       m.rango === 'ORO' ? 'ü•á' : 
                       m.rango === 'PLATA' ? 'ü•à' : 
                       m.rango === 'BRONCE' ? 'ü•â' : 
                       m.rango === 'COBRE' ? 'üü´' : '?' }}
                  </span>
                </span>
              </div>
              <div class="match-actions">
                <button type="button" class="action-btn ghost" (click)="verMatch(m)">
                  <span class="icon" aria-hidden="true">üëÅÔ∏è</span>
                  <span class="label">Ver</span>
                </button>
                <button type="button" class="action-btn ghost" (click)="editarMatch(m)">
                  <span class="icon" aria-hidden="true">‚úèÔ∏è</span>
                  <span class="label">Editar</span>
                </button>
                <button type="button" class="action-btn danger" (click)="cancelarMatch(m)">
                  <span class="icon" aria-hidden="true">‚úñ</span>
                  <span class="label">Cancelar</span>
                </button>
              </div>
            </div>
          </div>
          <!-- Indicador scroll dentro -->
          <div class="scroll-hint" *ngIf="indicatorVisible()" aria-hidden="true" [style.opacity]="indicatorOpacity()">
            <div class="fade-bottom"></div>
            <div class="hint-arrow">‚ñº</div>
          </div>
        </div>
        <ng-template #noUpcoming>
          <div class="no-upcoming">
            <div class="icon">üéæ</div>
            <div class="text">
              <h3>No tienes partidos programados</h3>
              <p>Crea o ap√∫ntate a un partido o torneo para verlo aqu√≠.</p>
            </div>
          </div>
  </ng-template>
      </section>

      <!-- Acciones r√°pidas -->
      <section class="quick-actions">
        <h2>Acciones r√°pidas</h2>
        <div class="actions-grid">
          <!-- Partidos -->
          <div class="action-card coming-soon">
            <div class="action-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"></circle>
                <path d="M12 6v6l4 2"></path>
              </svg>
            </div>
            <h3>Partidos</h3>
            <p>Programa y gestiona tus partidos</p>
            <span class="coming-soon-badge">Pr√≥ximamente</span>
          </div>

          <!-- Torneos -->
          <div class="action-card coming-soon">
            <div class="action-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="8" r="7"></circle>
                <polyline points="8.21,13.89 7,23 12,20 17,23 15.79,13.88"></polyline>
              </svg>
            </div>
            <h3>Torneos</h3>
            <p>Participa en competiciones</p>
            <span class="coming-soon-badge">Pr√≥ximamente</span>
          </div>

          <!-- Clubes -->
          <div class="action-card" (click)="navegarA('/jugador/clubes')">
            <div class="action-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                <line x1="16" y1="2" x2="16" y2="6"></line>
                <line x1="8" y1="2" x2="8" y2="6"></line>
                <line x1="3" y1="10" x2="21" y2="10"></line>
              </svg>
            </div>
            <h3>Clubes</h3>
            <p>Explora y √∫nete a clubes de p√°del</p>
          </div>
        </div>
      </section>
    </div>
  </main>
</div>
